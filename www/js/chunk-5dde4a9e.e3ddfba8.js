(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5dde4a9e"],{3703:function(e,t,r){"use strict";r.r(t);r("1c01"),r("58b2"),r("8e6e"),r("f3e2"),r("d25f"),r("ac6a"),r("456d"),r("6d67"),r("4f37");var o=r("bd86"),a=(r("c5f6"),r("2f62")),i=r("d3b5"),n=r("46f9");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l,u,d={props:{work:{type:Object,default:function(){}},handleClickEdit:{type:Function,default:function(){}},handleClickPreview:{type:Function,default:function(){}},colWidth:{type:Number}},data:function(){return{}},methods:{timeFmt:function(e){var t=new Date(e),r="".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate());return r}},render:function(e){var t=this;return e("a-card",{attrs:{hoverable:!0}},[e(n["a"],{slot:"cover",attrs:{coverImageUrl:this.work.cover_image_url,colWidth:this.colWidth}}),e("template",{class:"ant-card-actions",slot:"actions"},[e("a-tooltip",{attrs:{effect:"dark",placement:"bottom",title:this.$t("workCard.edit")}},[e("router-link",{attrs:{to:{name:"editor",params:{workId:this.work.id}},target:"_blank"}},[e("a-icon",{attrs:{type:"edit",title:this.$t("workCard.edit")}})])]),e("a-tooltip",{attrs:{effect:"dark",placement:"bottom",title:this.$t("workCard.preview")}},[e("a-icon",{attrs:{type:"eye",title:this.$t("workCard.preview")},on:{click:function(){return t.handleClickPreview()}}})])]),e("a-card-meta",[e("div",{slot:"title",class:"ant-card-meta-title",style:"font-size: 14px;"},[this.work.title,"(",this.work.id,")"]),e("div",{slot:"description",style:"font-size: 12px;"},[e("div",[this.$t("workCard.description"),": ",this.work.description]),e("div",[this.$t("workCard.createTime"),":"," ",this.timeFmt(this.work.created_at)])])])])}},h={props:{handleSearch:{type:Function,default:function(){}},currentPage:{type:Number,default:0},handleOpenCourseModal:{type:Function,default:function(){}}},data:function(){return{form:this.$form.createForm(this,{name:"searchForm"})}},methods:{handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,r){e||t.handleSearch({page:t.currentPage,size:8,CoursewareName:r.courseName})}))}},render:function(e){return e("a-form",{attrs:{layout:"inline",form:this.form}},[e("a-form-item",{attrs:{label:"课件名"}},[e("a-input",{attrs:{autocomplete:"off",placeholder:"请输入课件名"},directives:[{name:"decorator",value:["courseName",{rules:[{whitespace:!0}]}]}]})]),e("a-form-item",[e("a-button",{attrs:{type:"primary"},on:{click:this.handleSubmit}},["查询"]),e("a-button",{attrs:{type:"primary"},on:{click:this.handleOpenCourseModal},style:{marginLeft:"12px"}},["创建新课件"])])])}},f={props:{visble:{type:Boolean,default:!1},handleClose:{type:Function,default:function(){}}},data:function(){return{form:this.$form.createForm(this,{name:"courseNameForm"})}},methods:s({},Object(a["b"])("editor",["createCourse"]),{handleOk:function(){var e=this;this.form.validateFields((function(t,r){if(!t){var o=r.courseName;e.createCourse({CoursewareName:o.trim()})}}))},handleCancel:function(){this.form.resetFields(),this.handleClose()}}),render:function(){var e=arguments[0];return e("a-modal",{attrs:{title:"创建课件",visible:this.visble,okText:"确定",cancelText:"取消",maskClosable:!1},on:{ok:this.handleOk,cancel:this.handleCancel}},[e("a-form",{attrs:{form:this.form}},[e("a-form-item",{attrs:{label:"课件名",labelCol:{span:6},wrapperCol:{span:16}}},[e("a-input",{attrs:{autocomplete:"off",placeholder:"请输入课件名"},directives:[{name:"decorator",value:["courseName",{rules:[{required:!0,whitespace:!0,message:"请输入课件名称"}]}]}]})])])])}},p={components:{SearchCourseForm:h,ListItemCard:d,CourseNameModal:f},data:function(){return{activeWork:null,previewVisible:!1,courseNameVisible:!1}},computed:s({},Object(a["c"])("editor",["works"]),{},Object(a["c"])("loading",["fetchWorks_loading"])),methods:s({},Object(a["b"])("editor",["fetchWorks","createWork"]),{deleteWork:function(e){},handlePageChange:function(e){this.getCourseList({page:e-1,size:8})}}),render:function(e){var t=this;return e("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},[e("a-row",{attrs:{gutter:12},style:"margin-bottom: 12px;"},[e(h,{attrs:{handleSearch:this.getCourseList,handleOpenCourseModal:this.createWork}})]),e("a-row",{attrs:{gutter:12},ref:"workRow"},[this.fetchWorks_loading?e("a-col",{attrs:{span:18},style:{width:"100%",height:"400px",lineHeight:"400px",background:"rgba(255, 255, 255, 0.5)",textAlign:"center"}},[e("a-spin",{attrs:{tip:"课件列表获取中..."}})]):this.works.length>0?this.works.map((function(r){var o=0;if(t.$refs&&t.$refs.workRow){var a=t.$refs.workRow.$el.clientWidth;o=a/4-18}return e("a-col",{attrs:{span:6},key:r.id,style:"margin-bottom: 20px;"},[e(d,{attrs:{work:r,handleClickPreview:function(e){t.previewVisible=!0,t.activeWork=r},colWidth:o}})])})):e("a-empty")]),e(i["a"],{attrs:{work:this.activeWork||{},visible:this.previewVisible,handleClose:function(){t.previewVisible=!1}}}),e(f,{attrs:{visble:this.courseNameVisible,handleClose:function(){t.courseNameVisible=!1}}})])},created:function(){this.fetchWorks()}},m=p,b=r("2877"),v=Object(b["a"])(m,l,u,!1,null,null,null);t["default"]=v.exports},"46f9":function(e,t,r){"use strict";r("1c01"),r("58b2"),r("8e6e"),r("f3e2"),r("d25f"),r("ac6a"),r("456d"),r("a481");var o=r("bd86"),a=(r("c5f6"),r("de8f")),i=r.n(a);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(r,!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){return{position:"absolute",top:0,left:0,zIndex:0,height:"100%",width:"100%",backgroundSize:t?"contain":"cover",backgroundRepeat:"no-repeat",backgroundImage:"url(".concat(e,")")}}t["a"]={props:{coverImageUrl:String,colWidth:Number},methods:{getCover:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.$createElement,o=c({},s(e,t),{zIndex:1});return[r("div",{style:o})]},getCoverBg:function(e){var t=this.$createElement,r=c({},s(e));return[t("div",{style:r})]}},render:function(e){var t=[this.getCover(i.a,!0)],r=this.coverImageUrl&&this.coverImageUrl.replace("http://localhost:1337","");t=[this.getCover(r),this.getCoverBg(r)];var o={height:"".concat(9*this.colWidth/16,"px")};return e("div",{class:"card-cover-wrapper",style:o},[t])}}},"4f37":function(e,t,r){"use strict";r("aa77")("trim",(function(e){return function(){return e(this,3)}}))}}]);